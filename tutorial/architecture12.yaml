architecture:
  version: 0.4
  nodes:
    - !Component
      name: DRAM
      class: DRAM
      attributes:
        depth: 24*2**16 # TODO
        width: 1024
        datawidth: 8
        read_bandwidth: 1 # TODO
        write_bandwidth: 1 # TODO
      constraints:
        temporal:
          factors: [ D=3, L=1, E=1]
    - !Container
      name: PE
      spatial: {meshY: 1, meshX: 128}
      constraints:
        spatial:
          factors: [ D=16, L=8, E=1 ]
    - !Component
      name: Buffer
      class: SRAM
      attributes:
        depth: 768
        width: 128
        datawidth: 32
        read_bandwidth: 128
        write_bandwidth: 128
      constraints:
        temporal:
          factors: [ D=4, L=16, E=768 ]
        dataspace:
          bypass: [ Inputs, Weights, Z ]
    - !Component
      name: Accelerator
      spatial: {meshY: 4, meshX: 16}
      class: intmac
      attributes:
        multiplier_width: 16
        adder_width: 29
